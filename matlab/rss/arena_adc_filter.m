B = [-2639,   650,   5580,   4956,   -2234,   -4562,   3195,   7530,   -1873,   -9996,   23,   12794,   3149,   -15261,   -7593,   17087,   13401,   -17768,   -20479,   16789,   28599,   -13618,   -37362,   7754,   46182,   1220,   -54308,   -13597,   60804,   29468,   -64619,   -48712,   64584,   70923,   -59485,   -95395,   48110,   121110,   -29288,   -146707,   1941,   170497,   34900,   -190452,   -82119,   204182,   140592,   -208843,   -211381,   200951,   296148,   -175880,   -397987,   126738,   523336,   -41506,   -686878,   -105268,   926999,   383082,   -1373977,   -1083207,   2862960,   7162362,   7162362,   2862960,   -1083207,   -1373977,   383082,   926999,   -105268,   -686878,   -41506,   523336,   126738,   -397987,   -175880,   296148,   200951,   -211381,   -208843,   140592,   204182,   -82119,   -190452,   34900,   170497,   1941,   -146707,   -29288,   121110,   48110,   -95395,   -59485,   70923,   64584,   -48712,   -64619,   29468,   60804,   -13597,   -54308,   1220,   46182,   7754,   -37362,   -13618,   28599,   16789,   -20479,   -17768,   13401,   17087,   -7593,   -15261,   3149,   12794,   23,   -9996,   -1873,   7530,   3195,   -4562,   -2234,   4956,   5580,   650,   -2639];
B = B./max(B)*10.^(-7.4/20);

fs = 460e6;
f0 = 10e6;
f1 = 65e6;
fc = (f0+f1)/2
B = abs(f1-f0);
fcutoff = B/2 / (fs/2)
decimation = fs / B

% B2=fir1(128,0.48);
N=127;
% B2=fir1(N,0.465);
% B2=fir1(N,0.465,kaiser(N+1,4));
B2=fir1(N,0.1304,chebwin(N+1,60));
B2 = B2/max(B2);
B2 = round(B2*(2^23-1));
fprintf('%.0f, ', B2(1:end-1));
fprintf('%.0f', B2(end));
fprintf('\n');

H = freqz(B,512);
H2 = freqz(B2,512);
fs = 460;
freq = fs*1/1024*[0:511];
H = H./max(H);
H2 = H2./max(H2);

clf;
plot(freq,lp(H));
hold on;
plot(freq,lp(H2));
grid on;

return

clf;
B2 = B2 ./ max(B2);
plot(round(B2*2^19))
