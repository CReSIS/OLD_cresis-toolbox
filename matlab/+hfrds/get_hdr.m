function [hdr,check] = get_hdr(fid,hdr_loc)

fseek(fid,hdr_loc,-1);
head = fread(fid,64,'uint16');

check=0;
if (head(1) == hex2dec('AAAA')) && (head(2) == hex2dec('5555')) && (head(3) == hex2dec('AAAA')),
  check = 1;
  hdr.data_valid = 1;
  hdr.fifo = head(4);
  hdr.epri = 2^16*head(5) + head(6);
  hdr.delay = head(7);
  hdr.gps = char([floor(head(8)/256),mod(head(8),256), ...
                        floor(head(9)/256),mod(head(9),256), ...
                        floor(head(10)/256),mod(head(10),256)]);
  hdr.frac = 2^16*head(11) + head(12);
  hdr.pri = head(13);
  hdr.start = head(14);
  hdr.stop = head(15);
  hdr.words = hdr.stop-hdr.start-1;
  hdr.bshft = floor(head(16)/4096);
  hdr.dec = mod(floor(head(16)/1024),4);
  hdr.pre = mod(head(16),1024);
  hdr.nmea_frac = 2^16*head(17) + head(18);
  hdr.nmea     = char([floor(head(26)/256),mod(head(26),256), ...
                   floor(head(27)/256),mod(head(27),256), ...
                   floor(head(28)/256),mod(head(28),256), ...
                   floor(head(29)/256),mod(head(29),256), ...
                   floor(head(30)/256),mod(head(30),256), ...
                   floor(head(31)/256),mod(head(31),256), ...
                   floor(head(32)/256),mod(head(32),256), ...
                   floor(head(33)/256),mod(head(33),256), ...
                   floor(head(34)/256),mod(head(34),256), ...
                   floor(head(35)/256),mod(head(35),256), ...
                   floor(head(36)/256),mod(head(36),256), ...
                   floor(head(37)/256),mod(head(37),256), ...
                   floor(head(38)/256),mod(head(38),256), ...
                   floor(head(39)/256),mod(head(39),256), ...
                   floor(head(40)/256),mod(head(40),256), ...
                   floor(head(41)/256),mod(head(41),256), ...
                   floor(head(42)/256),mod(head(42),256), ...
                   floor(head(43)/256),mod(head(43),256), ...
                   floor(head(44)/256),mod(head(44),256), ...
                   floor(head(45)/256),mod(head(45),256), ...
                   floor(head(46)/256),mod(head(46),256), ...
                   floor(head(47)/256),mod(head(47),256), ...
                   floor(head(48)/256),mod(head(48),256), ...
                   floor(head(49)/256),mod(head(49),256), ...
                   floor(head(50)/256),mod(head(50),256), ...
                   floor(head(51)/256),mod(head(51),256), ...
                   floor(head(52)/256),mod(head(52),256), ...
                   floor(head(53)/256),mod(head(53),256), ...
                   floor(head(54)/256),mod(head(54),256), ...
                   floor(head(55)/256),mod(head(55),256), ...
                   floor(head(56)/256),mod(head(56),256), ...
                   floor(head(57)/256),mod(head(57),256), ...
                   floor(head(58)/256),mod(head(58),256), ...
                   floor(head(59)/256),mod(head(59),256), ...
                   floor(head(60)/256),mod(head(60),256), ...
                   floor(head(61)/256),mod(head(61),256), ...
                   floor(head(62)/256),mod(head(62),256), ...
                   floor(head(63)/256),mod(head(63),256), ...
                   floor(head(64)/256),mod(head(64),256)]);
  hdr.loc = hdr_loc;
  hdr.next_loc = 128 + 2*hdr.words + hdr_loc;

else
  hdr.check = 0;
  hdr.data_valid = 0;
  hdr.fifo = 0;
  hdr.epri = 0;
  hdr.delay = 0;
  hdr.gps = '000000';
  hdr.frac = 0;
  hdr.pri = 0;
  hdr.start = 0;
  hdr.stop = 0;
  hdr.words = 0;
  hdr.bshft = 0;
  hdr.dec = 0;
  hdr.pre = 0;
  hdr.nmea_frac = 0;
  hdr.nmea = '000000000000000000000000000000000000000000000000000000000000000000000000000000';
  hdr.loc = 0;
  hdr.next_loc = 0;
end;